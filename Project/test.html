<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<!doctype html>
<html lang="en">

<html>


<head>
  <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Test</title>
    <!--<link rel="stylesheet" type="text/css" href="style2.css">-->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="project.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
     <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"
     <script src='scriptlib.js'></script>
     <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
     <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script>
     <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">





   <style>
   body {
        background-image: url('bg1.jpg');
        background-position: center center;
        background-repeat:  no-repeat;
        background-attachment: fixed;
        background-size:  cover;
        width: 100%;
        height: 400px;
   }
   </style>

</head>




<body>

  <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #bcdbdf;">
    <a class="navbar-brand" href="https://mandynyt.github.io/Project/home.html">
    <img src="UinHKlogo.png" alt="UinHKlogo" style="width:200px;height:81px;border:0;">
    </a>    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://mandynyt.github.io/Project/about.html">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://mandynyt.github.io/Project/universities.html">Universities</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://mandynyt.github.io/Project/overviews.html">Overviews</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://mandynyt.github.io/Project/locations.html">Locations</a>
        </li>
      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Go</button>
      </form>
    </div>
  </nav>




      <!-- Sign and date the page, it's only polite! -->
      <div class="table-responsive">
      <center><button type="button" class="btn btn-warning" id='get_age'>Get Average Age</button></center>
      <table id="table3" width="100%" class="table table-bordered"></table>
      <table id="table4" width="100%" class="table table-bordered"></table>
      <div id="chart"></div>



      $("button#get_age").click(function() {
            var table3_items = [];
            var i = 0;
            var airtable_read_endpoint = "https://api.airtable.com/v0/appdKlfv4HAjmlZGI/Json?api_key=key3P4gTMtrDY1ylx";
            var table3_dataSet = [];
            $.getJSON(airtable_read_endpoint, function(result) {
                   $.each(result.records, function(key,value) {
                       table3_items = [];
                           table3_items.push(value.fields.Companies);
                           table3_items.push(value.fields.Average_age);
                           table3_dataSet.push(table3_items);
                    }); // end .each

                 $('#table3').DataTable( {
                     data: table3_dataSet,
                     retrieve: true,
                     columns: [
                         { title: "Company",
                           defaultContent:""},
                         { title: "Average Age",
                           defaultContent:""},
                     ]
                 } );
            }); // end .getJSON

            var table4_items = [];
            var i = 0;
            var airtable_read_endpoint =
            "https://api.airtable.com/v0/appdKlfv4HAjmlZGI/Json?api_key=key3P4gTMtrDY1ylx";
            var table4_dataSet = [];
            $.getJSON(airtable_read_endpoint, function(result) {
                   $.each(result.records, function(key,value) {
                       table4_items = [];
                           table4_items.push(value.fields.Companies);
                           table4_items.push(value.fields.Average_age);
                           table4_dataSet.push(table4_items);
                           console.log(table4_items);
                    }); // end .each
                    console.log(table4_dataSet);

                   var chart = c3.generate({
                        data: {
                            columns: table4_dataSet,
                            type : 'bar'
                        },
                        axis: {
                            x: {
                                label: 'Company'
                            },
                            y: {
                                label: 'Average age'
                            },
                        }
                    });

             }); // end .getJSON
          }); // end button


      <script src='data.js'></script>
      <script src='age_data.js'></script>









<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>
</html>
